<!doctype html>
<html lang="pt-PT">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>História – Pedro e Inês</title>
  <link rel="stylesheet" href="historia.css">
  <link rel="stylesheet" href="../grid.css">
  <link rel="stylesheet" href="style1.css">
  <style>
    img { max-width: 100%; height: auto; display: block; }
  </style>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Cinzel+Decorative:wght@400;700;900&display=swap" rel="stylesheet">
  <script src="transitions.js"></script>
</head>
<body>
  <header class="topbar">
    <a href="index.html" class="logo-link">
      <img src="brasao.png" alt="Brasão" class="logo">
    </a>
    <div class="menu" tabindex="0">☰</div>
  </header>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      document.body.style.opacity = '1';
    });
  </script>

  <!-- MENU OVERLAY -->
  <div id="menu-overlay" class="menu-overlay">
    <div class="menu-content">
      <span class="close-menu">✕</span>

      <div class="menu-columns">

        <div class="col">
          <h3>A Lenda</h3>
          <a href="historia.html">História</a>
           <a href="quiz.html">Quiz</a>
        </div>

        <div class="col">
          <h3>Legado</h3>
          <a href="sitios.html">Lugares</a>
          <a href="livros.html">Livros</a>
          <a href="audiovisual.html">Audiovisual</a>
          <a href="arte.html">Arte</a>
        </div>

        <div class="col">
          <h3>Confessionário</h3>
          <a href="ines.html">Ines de Castro</a>
          <a href="pedro.html">Pedro I</a>
          <a href="constança.html">Constança</a>
          <a href="afonso.html">Afonso IV</a>
          <a href="duarte.html">Duarte Pacheco</a>
          <a href="alvaro.html">Alvaro Gonçalves</a>
          <a href="maria.html">Maria Gonçalves</a>
          <a href="fernao.html">Fernão Lopes</a>
          <a href="joao.html">João do Mondego</a>
          <a href="frei.html">Frei João das regras</a>
        </div>

        <div class="col">
          <h3>Info</h3>
          <a href="sobre.html"> Sobre o projeto</a>
        </div>

      </div>
    </div>
  </div>

  <section class="historia">

    <h1 class="page-title font-pt-serif">História</h1>

    <div class="bg">
      <img src="mosteiro.png" alt="Mosteiro de Alcobaça">
    </div>

    <div class="book">

      <!-- Página 1 -->
      <div class="page" id="p1">
        <div class="front cover-page">
          <h2 class="main-title">Pedro e Inês</h2>
          <p></p>
        </div>
        <div class="back">
          <h2>O Encontro</h2> <br>
          <p>Corria o século XIV, tempo de reis e intrigas, de alianças feitas e desfeitas ao sabor da política e da guerra. Em Portugal, reinava Dom Afonso IV, um monarca prudente, atento à estabilidade do reino e às ameaças vindas de Castela, o poderoso vizinho a leste. <br>
Para fortalecer laços diplomáticos, Afonso IV decidiu casar o seu filho e herdeiro, o infante Dom Pedro, com Dona Constança Manuel, uma jovem nobre castelhana. Quando Constança chegou à corte portuguesa, trazia consigo várias damas de companhia, entre elas, uma mulher de beleza serena e olhar profundo: Inês de Castro, filha bastarda de um fidalgo galego, Dom Pedro Fernandes de Castro.<br>
</p>
        </div>
      </div>

      <div class="page" id="p2">
        <div class="front">
          <h2></h2>
          <p>O destino quis que, entre o infante e aquela dama, nascesse uma paixão avassaladora. Bastou um olhar, um gesto discreto, um sorriso e Pedro, o futuro rei de Portugal, rendeu-se ao encanto de Inês.
Mas aquele amor era proibido. Inês não era rainha, nem podia sê-lo. E o rei, percebendo o perigo que tal ligação representava para o reino, tentou afastá-la da corte. O que Afonso IV não sabia é que o amor, uma vez despertado, não se deixa domar.
</p>
        </div>
        <div class="back">
          <h2>Um Amor Proibido</h2> <br>
          <p>Durante anos, Pedro e Inês viveram um amor secreto, feito de cartas trocadas às escondidas e encontros sob a sombra das laranjeiras e das arcadas de pedra. Coimbra tornou-se o refúgio do casal, especialmente o Paço de Santa Clara, junto ao rio Mondego, onde o murmúrio das águas parecia guardar os segredos do seu amor. <br>
            Mesmo casado com Constança, Pedro não conseguia esconder o que sentia. Constança, magoada, mas resignada, acabou por morrer em 1345 ao dar à luz o infante Dom Fernando. E foi então que Pedro, liberto dos laços do matrimónio, escolheu viver abertamente com Inês. <br>

          </p>
        </div>
      </div>

      <div class="page" id="p3">
        <div class="front">
          <h2></h2>
          <p>Chamou-a para junto de si e reconheceu publicamente os filhos que com ela tivera, Afonso, João, Dinis e Beatriz, provocando a ira e a preocupação da corte. <br>
             O rei e os seus conselheiros temiam que o infante, cego de amor, acabasse por legitimar os filhos com Inês e afastar do trono o pequeno Fernando, herdeiro legítimo. Além disso, a poderosa família Castro, ligada à nobreza de Castela, poderia usar a influência de Inês para interferir nos destinos de Portugal.</p>
        </div>
        <div class="back">
          <h2>O Destino de Inês</h2> <br>
          <p>As súplicas do rei para que Pedro renunciasse ao seu amor foram em vão. O infante manteve-se firme, recusando-se a abandonar Inês. Então, pressionado por temores políticos e conselhos traiçoeiros, Dom Afonso IV tomou a decisão que marcaria para sempre a história de Portugal. <br>
          Num dia frio de 1355, enquanto Pedro estava ausente, o rei ordenou a morte de Inês. Três homens: Pero Coelho, Álvaro Gonçalves e Diogo Lopes Pacheco, foram enviados a Coimbra para cumprir a terrível sentença. <br>
        Nos jardins do Paço de Santa Clara, junto às águas calmas do Mondego, Inês foi executada.     </p>
        </div>
      </div>

      <div class="page" id="p4">
        <div class="front">
          <h2></h2>
          <p>Reza a lenda que chorou e implorou pela vida diante dos algozes, recordando o amor que a unia a Pedro e os filhos pequenos que deixaria para trás. Mas nada comoveu os assassinos. O sangue de Inês tingiu a terra e o rio levou consigo as últimas lágrimas da mulher que amara um príncipe.</h2>
          </p>
        </div>
        <div class="back">
          <h2>A Fúria de um Rei sem Trono</h2> <br>
          <p>Quando Pedro soube da morte de Inês, enlouqueceu de dor. Gritou, chorou e jurou vingança contra os que lhe haviam roubado o amor. Voltou-se contra o pai, levantando armas e homens, e durante meses Portugal viveu dividido entre o amor e a lealdade. <br>
          Pai e filho acabaram por reconciliar-se, mas o perdão de Pedro nunca foi verdadeiro. O ódio permanecia, silencioso, à espera do momento de justiça. <br>
        Em 1357, com a morte de Afonso IV, Pedro tornou-se rei de Portugal: Dom Pedro I, o "Justiceiro". E foi então que cumpriu a sua promessa: mandou capturar os assassinos de Inês. </p>
        </div>
      </div>

      <div class="page" id="p5">
        <div class="front">
          <h2></h2>
          <p>Diogo Lopes Pacheco conseguiu fugir, mas Pero Coelho e Álvaro Gonçalves foram apanhados. Diz-se que o rei mandou arrancar-lhes o coração, a um pelo peito, a outro pelas costas, declarando que assim pagavam o crime cometido contra o coração que ele tanto amara.</p>
        </div>
        <div class="back">
          <h2>Agora é tarde, Inês é morta</h2> <br>
          <p>O episódio mais lendário, e também o mais poético, nasceu da dor de Pedro. <br>
          Conta-se que, dominado pelo amor e pela loucura, mandou trazer o corpo de Inês de Castro de Coimbra para Alcobaça, num cortejo fúnebre grandioso. <br>
        Diz a lenda que Inês foi colocada num trono, vestida com as roupas reais, uma coroa sobre a cabeça pálida, e que os nobres da corte foram obrigados a ajoelhar-se diante dela e beijar-lhe a mão, reconhecendo-a como Rainha de Portugal, ainda que morta. </p>
        </div>
      </div>

      <div class="page" id="p6">
        <div class="front">
          <h2></h2>
          <p>A imagem de Pedro a coroar a mulher amada depois da morte tornou-se símbolo eterno da fidelidade e da tragédia.</p>
        </div>
        <div class="back">
          <h2>Amor Eterno</h2> <br>
          <p>Para perpetuar o seu amor, Pedro mandou construir dois túmulos de pedra branca no Mosteiro de Alcobaça, verdadeiras obras-primas da escultura gótica portuguesa. <br>
          Num deles repousa Inês, no outro, o próprio Pedro. Os túmulos estão colocados frente a frente, para que, no Dia do Juízo Final, os dois amantes possam despertar e olhar-se novamente, unidos pela eternidade. <br>
        Hoje, séculos depois, Pedro e Inês continuam lado a lado, em pedra e memória, testemunhas de um amor que o tempo não apagou.</p>
        </div>
      </div>

      <div class="page" id="p7">
        <div class="front end-page">
          <h2 class="end-title">Fim</h2>
        </div>
        <div class="back"><h2></h2><p></p></div>
      </div>

      <div class="controls">
        <button id="prev">◄</button>
        <button id="next">►</button>
      </div>
    </div>

    <!-- MENU OVERLAY -->
    <div id="menu-overlay" class="menu-overlay">
    <div class="menu-content">
      <span class="close-menu">✕</span>

      <div class="menu-columns">

        <div class="col">
          <h3>A Lenda</h3>
          <a href="historia.html">História</a>
           <a href="quiz.html">Quiz</a>
        </div>

        <div class="col">
          <h3>Legado</h3>
          <a href="sitios.html">Lugares</a>
          <a href="livros.html">Livros</a>
          <a href="audiovisual.html">Audiovisual</a>
          <a href="arte.html">Arte</a>
        </div>

        <div class="col">
          <h3>Confessionário</h3>
          <a href="ines.html">Ines de Castro</a>
          <a href="pedro.html">Pedro I</a>
          <a href="constança.html">Constança</a>
          <a href="afonso.html">Afonso IV</a>
          <a href="duarte.html">Duarte Pacheco</a>
          <a href="alvaro.html">Alvaro Gonçalves</a>
          <a href="maria.html">Maria Gonçalves</a>
          <a href="fernao.html">Fernão Lopes</a>
          <a href="joao.html">João do Mondego</a>
          <a href="frei.html">Frei João das regras</a>
        </div>

        <div class="col">
          <h3>Info</h3>
          <a href="sobre.html"> Sobre o projeto</a>
        </div>

      </div>
    </div>
  </div>

  </section>

  <script>
    const menuBtn = document.querySelector(".menu");
    const menuOverlay = document.getElementById("menu-overlay");
    const closeBtn = document.querySelector(".close-menu");

    function openMenu() {
      menuOverlay.classList.add("open");
      // Focus on the first link in the menu
      const firstLink = menuOverlay.querySelector("a");
      if (firstLink) firstLink.focus();
    }

    function closeMenu() {
      menuOverlay.classList.remove("open");
      // Focus back to menu button
      menuBtn.focus();
    }

    menuBtn.addEventListener("click", openMenu);

    menuBtn.addEventListener("keydown", (e) => {
      if (e.key === "Enter" || e.key === " ") {
        e.preventDefault();
        openMenu();
      }
    });

    closeBtn.addEventListener("click", closeMenu);

    // Close on Escape key
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape" && menuOverlay.classList.contains("open")) {
        closeMenu();
      }
    });

    // LIVRO
    const pages = Array.from(document.querySelectorAll(".page"));
    const isMobile = window.innerWidth <= 768;

    if (isMobile) {
      // Modo mobile: mostrar frente e verso como páginas separadas
      const allSides = [];
      pages.forEach(page => {
        const front = page.querySelector('.front');
        const back = page.querySelector('.back');
        if (front) allSides.push(front);
        if (back) allSides.push(back);
      });

      let currentIndex = 0;
      
      const showSide = (index) => {
        allSides.forEach((side, i) => {
          if (i === index) {
            side.classList.add('active');
            side.parentElement.style.opacity = '1';
            side.parentElement.style.zIndex = '10';
          } else {
            side.classList.remove('active');
          }
        });
        
        // Esconder páginas que não têm lado ativo
        pages.forEach(page => {
          const hasActive = page.querySelector('.active');
          if (!hasActive) {
            page.style.opacity = '0';
            page.style.zIndex = '1';
          }
        });
      };
      
      showSide(0);
      
      document.getElementById("next").addEventListener("click", () => {
        if (currentIndex < allSides.length - 1) {
          currentIndex++;
          showSide(currentIndex);
        }
      });

      document.getElementById("prev").addEventListener("click", () => {
        if (currentIndex > 0) {
          currentIndex--;
          showSide(currentIndex);
        }
      });
    } else {
      // Modo desktop: animação 3D original
      let flipped = [];

      const updateZIndices = () => {
        pages.forEach((page, index) => {
          page.style.zIndex = page.classList.contains("flipped")
            ? index + 1
            : pages.length + (pages.length - index);
        });
      };

      const holdTopLayer = (page) => {
        const tempZ = pages.length * 3;
        page.style.zIndex = tempZ;
        const onTransitionEnd = () => {
          page.removeEventListener("transitionend", onTransitionEnd);
          updateZIndices();
        };
        page.addEventListener("transitionend", onTransitionEnd);
      };

      updateZIndices();
      pages[0].classList.add("flipped");
      flipped.push(0);
      holdTopLayer(pages[0]);

      document.getElementById("next").addEventListener("click", () => {
        const nextPage = flipped.length;
        if (nextPage < pages.length) {
          pages[nextPage].classList.add("flipped");
          flipped.push(nextPage);
          holdTopLayer(pages[nextPage]);
        }
      });

      document.getElementById("prev").addEventListener("click", () => {
        if (flipped.length > 0) {
          const last = flipped.pop();
          pages[last].classList.remove("flipped");
          holdTopLayer(pages[last]);
        }
      });
    }
  </script>

</body>
</html>